<div class="mb-4" data-controller="previews">
  <%= f.label :images, class: "form-label" %>
  <div class="form-text mb-1"><%= t("defaults.message.quantity_limit") %></div>
  <%= f.file_field :images, multiple: true, direct_upload: true, accept: "image/*", class: "form-control rounded-pill", data: { previews_target: "input", action: "change->previews#preview" } %>

  <% if post.images.attached? %>
    <div data-target="previews.previews">
      <% post.images.with_all_variant_records.each do |image| %>
        <%= image_tag image.variant(:medium).processed.url, data: { previews_target: "preview" } %>
      <% end %>
    </div>
  <% else %>
    <%= image_tag "", data: { previews_target: "preview" } %>
  <% end %>
</div>
